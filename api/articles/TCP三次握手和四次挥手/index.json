{"title":"TCP三次握手和四次挥手","uid":"fd4deaa8e285f4ef9f15cf7bee668bc9","slug":"TCP三次握手和四次挥手/index","date":"2021-09-01T16:00:00.000Z","updated":"2023-05-08T05:51:51.395Z","comments":true,"path":"api/articles/TCP三次握手和四次挥手/index.json","keywords":null,"cover":null,"content":"<h3 id=\"三次握手\"><a href=\"#三次握手\" class=\"headerlink\" title=\"三次握手\"></a>三次握手</h3><div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">提示</p>\n<p>三次握手就是为了确保双方正常连接</p>\n</div>\n<p>C -&gt; S<br>S -&gt; C<br>C -&gt; S</p>\n<p>主动打开连接的是客户端<br>被动打开连接的是服务端</p>\n<p>第一次握手证明客户端发送能力正常<br>第二次握手证明服务端接受能力、发送能力正常<br>第三次握手证明客户端接收能力正常</p>\n<p>第一次握手 TCP客户进程也是先创建传输控制块TCB，然后向服务器发出连接请求报文，这是报文首部中的同部位SYN&#x3D;1，同时选择一个初始序列号 seq&#x3D;x ，此时，TCP客户端进程进入了 SYN-SENT 同步已发送状态</p>\n<p>第二次握手 TCP服务器收到请求报文后，如果同意连接，则会向客户端发出确认报文。确认报文中应该 ACK&#x3D;1，SYN&#x3D;1，确认号是ack&#x3D;x+1，同时也要为自己初始化一个序列号 seq&#x3D;y，此时，TCP服务器进程进入了 SYN-RCVD 同步收到状态</p>\n<p>第三次握手 TCP客户端收到确认后，还要向服务器给出确认。确认报文的ACK&#x3D;1，ack&#x3D;y+1，自己的序列号seq&#x3D;x+1，此时，TCP连接建立，客户端进入ESTABLISHED已建立连接状态 触发三次握手</p>\n<h3 id=\"四次挥手\"><a href=\"#四次挥手\" class=\"headerlink\" title=\"四次挥手\"></a>四次挥手</h3><p>C -&gt; S<br>S -&gt; C<br>S -&gt; C<br>C -&gt; S</p>\n<p>第一次挥手 客户端发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN&#x3D;1，其序列号为seq&#x3D;u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态</p>\n<p>第二次挥手 服务器端接收到连接释放报文后，发出确认报文，ACK&#x3D;1，ack&#x3D;u+1，并且带上自己的序列号seq&#x3D;v，此时，服务端就进入了CLOSE-WAIT 关闭等待状态</p>\n<p>第三次挥手 客户端接收到服务器端的确认请求后，客户端就会进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文，服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。</p>\n<p>第四次挥手 客户端收到服务器的连接释放报文后，必须发出确认，ACK&#x3D;1，ack&#x3D;w+1，而自己的序列号是seq&#x3D;u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态，但此时TCP连接还未终止，必须要经过2MSL后（最长报文寿命），当客户端撤销相应的TCB后，客户端才会进入CLOSED关闭状态，服务器端接收到确认报文后，会立即进入CLOSED关闭状态，到这里TCP连接就断开了，四次挥手完成</p>\n","text":"三次握手 提示 三次握手就是为了确保双方正常连接 C -&gt; SS -&gt; CC -&gt; S 主动打开连接的是客户端被动打开连接的是服务端 第一次握手证明客户端发送能力正常第二次握手证明服务端接受能力、发送能力正常第三次握手证明客户端接收能力正常 第一次握手 TCP客...","link":"","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"知识点","slug":"知识点","count":9,"path":"api/categories/知识点.json"}],"tags":[{"name":"TCP","slug":"TCP","count":1,"path":"api/tags/TCP.json"},{"name":"三次握手","slug":"三次握手","count":1,"path":"api/tags/三次握手.json"},{"name":"四次挥手","slug":"四次挥手","count":1,"path":"api/tags/四次挥手.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B\"><span class=\"toc-text\">三次握手</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B\"><span class=\"toc-text\">四次挥手</span></a></li></ol>","author":{"name":"Life Experiencer","slug":"blog-author","avatar":"https://meng160626.github.io/charts/assets/headshot.cf6ae831.jpg","link":"/","description":"【开始努力最好的时机，就是当下】QQ:1350257855      微信:meng000414","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"ajax发送文件","uid":"77cefb5fd0cde76aa6ec39dbc2ce3657","slug":"ajax发送文件/index","date":"2021-09-12T16:00:00.000Z","updated":"2023-04-07T05:47:37.347Z","comments":true,"path":"api/articles/ajax发送文件/index.json","keywords":null,"cover":null,"text":"const sendFormData &#x3D; function() &#123; const file &#x3D; new File(); const form &#x3D; new FormData(); form.append(&#39;fileData&#39;, ...","link":"","photos":[],"count_time":{"symbolsCount":511,"symbolsTime":"1 mins."},"categories":[{"name":"jQuery","slug":"jQuery","count":1,"path":"api/categories/jQuery.json"}],"tags":[{"name":"jQuery","slug":"jQuery","count":1,"path":"api/tags/jQuery.json"},{"name":"前后端交互","slug":"前后端交互","count":1,"path":"api/tags/前后端交互.json"},{"name":"ajax","slug":"ajax","count":1,"path":"api/tags/ajax.json"}],"author":{"name":"Life Experiencer","slug":"blog-author","avatar":"https://meng160626.github.io/charts/assets/headshot.cf6ae831.jpg","link":"/","description":"【开始努力最好的时机，就是当下】QQ:1350257855      微信:meng000414","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Element bug记录","uid":"fd888ffbf7087b4ba83a165597c715b7","slug":"Element-bug记录/index","date":"2021-08-16T16:00:00.000Z","updated":"2023-04-06T06:05:23.995Z","comments":true,"path":"api/articles/Element-bug记录/index.json","keywords":null,"cover":null,"text":"Element.ui使用el-tree组件，一键展开或关闭expandAll() &#123; for (let key in this.$refs.tree.store.nodesMap) &#123; this.$refs.tree.store.nodesMap[key].e...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"bug","slug":"bug","count":6,"path":"api/categories/bug.json"}],"tags":[{"name":"bug","slug":"bug","count":6,"path":"api/tags/bug.json"},{"name":"element","slug":"element","count":1,"path":"api/tags/element.json"}],"author":{"name":"Life Experiencer","slug":"blog-author","avatar":"https://meng160626.github.io/charts/assets/headshot.cf6ae831.jpg","link":"/","description":"【开始努力最好的时机，就是当下】QQ:1350257855      微信:meng000414","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}