[{"id":"b945a3fa38137babb32ce78c9f125574","title":"Hexo搭建+配置GitHub Pages","content":"Hexo搭建+配置GitHub Pages1.0 搭建Hexo1.1 安装Node.js1.2 安装Git1.3 使用npm安装Hexo $ npm install -g hexo-cli\n&#x2F;&#x2F; hexo init [folder]\n $ hexo init Blog\n\n1.4 安装主题包$ npm install hexo-theme-aurora\n\n\n\n\n\n\n\n\n\n\n在 node_modules 目录下的hexo-theme-aurora 主题文件夹中复制 _config.yml 文件到根目录下，并重命名为 _config.aurora.yml\n\n\n\n\n\n\n\n\n\n\n\n修改根目录下的_config.yml配置项\n注：配置项的:后必须添加空格，否则会报错映射失败\ntheme: Aurora\n\n1.5 关闭评论\n\n\n\n\n\n\n\n\n全局搜索 ye.render=ie;\n注释这一句代码\n1.6 设置代码高亮\n\n\n\n\n\n\n\n\n修改根目录下的_config.yml配置项\nhighlight:\n  enable: false\n  line_number: true\n  auto_detect: false\n  tab_replace: &#39;&#39;\n  wrap: true\n  hljs: false\nprismjs:\n  enable: true\n  preprocess: false\n  line_number: true\n  tab_replace: &#39;&#39;\n\n1.7 关闭访客量\n\n\n\n\n\n\n\n\n修改根目录下_config.aurora配置项\nbusuanzi:\n  enable: false\n\n\n\n\n\n\n\n\n\n\n后续想要添加或重写算法可以访问[不蒜子](不蒜子 | 不如 (ibruce.info))\n2. 配置到GitHub Pages3. 疑难问题3.1 VS Code控制台无法运行脚本\n\n\n\n\n\n\n\n\n当使用VS Code控制台输入命令hexo server报错在此系统上禁止运行脚本时\n打开Windows设置 -&gt; 搜索PowerShell -&gt; 选择允许 -&gt; 应用\n\n","slug":"Hexo搭建+配置GitHub Pages/index","date":"2023-04-05T16:00:00.000Z","categories_index":"环境搭建及配置","tags_index":"Hexo","author_index":"Life Experiencer"},{"id":"fe07511baca233cfbf08f1c1c1d5d46a","title":"内存泄漏排查记录","content":"\n\n\n\n\n\n场景\n页面长期不关闭后，页面卡死\n\n排查记录\n\n\n\n\n\n\n\n\n1、打开浏览器开发工具性能监视器\n2、操作页面观察js堆大小发现：随着操作次数增加，js堆内存在每次垃圾回收以后逐次增加\n3、刷新页面，查看内存，强制触发垃圾回收，拍摄堆快照\n4、反复操作页面后，再次拍摄堆快照\n5、对比两次快照，打开closure，发现一个闭包函数被反复声明，点击提示的文件位置，发现该函数为使用layui的弹出层时的确定按钮回调中的一个闭包函数\nVue中易引发内存泄漏的情况1、声明的全局变量没有在切换页面时清空 &#x2F; 添加的全局事件没有被移除export default &#123;\n    mounted() &#123;\n        window.test &#x3D; &#123;\n            &#x2F;&#x2F; 此处在全局window对象中引用了本页面的dom对象\n            name: &#39;home&#39;,\n            node: document.getElementById(&#39;home&#39;),\n        &#125;\n    &#125;,\n&#125;\n\n\n\n\n\n\n\n\n\n\n解决方案\ndestroyed () &#123;\n\twindow.test &#x3D; null &#x2F;&#x2F; 页面卸载的时候解除引用\n&#125;\n\n2、添加在EventBus中的事件没有解绑export default &#123;\n    mounted () &#123;\n        this.$EventBus.$on(&#39;homeTask&#39;, res &#x3D;&gt; this.func(res))\n    &#125;\n&#125;\n\n\n\n\n\n\n\n\n\n\n解决方案\ndestroyed () &#123;\n    this.$EventBus.$off()\n&#125;\n\n3、Echarts\n\n\n\n\n\n\n\n\n每一个图例在没有数据的时候它会创建一个定时器去渲染气泡，页面切换后，echarts图例是销毁了，但是这个echarts的实例还在内存当中，同时它的气泡渲染定时器还在运行。这就导致Echarts占用 CPU 高，导致浏览器卡顿，当数据量比较大时甚至浏览器崩溃。\n\n\n\n\n\n\n\n\n\n解决方案\nbeforeDestroy () &#123;\n    this.chart.clear()\n&#125;\n\nES6防止内存泄漏\n\n\n\n\n\n\n\n\nweakset和weakmap 他们对值的引用都是不计入垃圾回收机制的，也就是说，如果其他对象都不再引用该对象，那么垃圾回收机制会自动回收该对象所占用的内存。\nconst wm &#x3D; new WeakMap()\nconst element &#x3D; document.getElementById(&#39;example&#39;)\nwm.set(element, &#39;something&#39;)\nwm.get(element)\n\n\n\n\n\n\n\n\n\n\n上面代码中，先新建一个Weakmap实例。然后，将一个DOM节点作为键名存入该实例，并将一些附加信息作为键值，一起存放在WeakMap里面。这时，WeakMap里面对element的引用就是弱引用，不会被计入垃圾回收机制，一旦element从文档中被移除，绑定的变量也随之销毁，非常适合用于例如绑定事件等操作。\n","slug":"内存泄漏/index","date":"2022-11-18T16:00:00.000Z","categories_index":"效率优化","tags_index":"内存泄漏","author_index":"Life Experiencer"},{"id":"d2b1c86d84778284c9a48f05cbcb4fb9","title":"uni-app开发小程序 bug记录","content":"使用uView组件u-datetime-picker组件渲染失效\n\n\n\n\n\n\n\n\n\n使用该组件时，如果以任何方式配置cancel事件，会导致组件渲染失败需要如下添加两条属性，并且值不能为官方默认值，否则依旧会渲染失败\n\n无法穿透至组件内部修改样式\n\n\n\n\n\n\n\n\n需要在methods同级位置添加代码\noptions: &#123; styleIsolation: &#39;shared&#39; &#125;\n\n\n字体文件在工具中报错\n官方文档链接\n选择器*不能使用\n\n\n\n\n\n\n\n\nuni-app不支持*选择器\nucharts使用时绘制层级问题\n\n\n\n\n\n\n\n\n必须添加:canvas2d=&quot;true&quot;属性\n\n","slug":"uni-app开发小程序-bug记录/index","date":"2022-08-22T16:00:00.000Z","categories_index":"bug","tags_index":"bug,uni-app","author_index":"Life Experiencer"},{"id":"0e3018629513531f8d065044c5f51d64","title":"搭建Express框架","content":"Create ProjectExpress 中文网\nStart Serve$ npm start\n\n$ $env:DEBUG&#x3D;&#39;myapp:*&#39;; npm start\n\nChange View Engine To Html$ npm install ejs --save\n\napp.js\nvar ejs &#x3D; require(&#39;ejs&#39;);\n\n&#x2F;&#x2F; app.set(&#39;view engine&#39;, &#39;jade&#39;);\napp.engine(&#39;.html&#39;, ejs.__express) &#x2F;&#x2F; 设置视图引擎后缀，为.html\napp.set(&#39;view engine&#39;, &#39;html&#39;);     &#x2F;&#x2F; 设置视图引擎为html\n\n\n\n\n\n\n\n\n\n\n删除.jade文件 新建.html文件\nHot Update$ npm install -g node-dev\n或\n$ npm install node-dev -D\n\npackage.json\n&#123;\n  &quot;scripts&quot;: &#123;\n    &quot;dev&quot;: &quot;node-dev .&#x2F;bin&#x2F;www&quot;\n  &#125;\n&#125;\n\n$ npm run dev&#96;","slug":"Express搭建/index","date":"2022-08-02T16:00:00.000Z","categories_index":"环境搭建及配置","tags_index":"环境搭建及配置,node.js,Express","author_index":"Life Experiencer"},{"id":"859c08d30a5499f1a412de01ef363b3c","title":"使用VS Code开发uni-app","content":"Project info\n\n\n\n\n\n\n\n\n编辑器：VS Code框架：uni-app\nProject create\n\n\n\n\n\n\n\n\n使用npm搭配vue-cli\n$ vue create -p dcloudio&#x2F;uni-preset-vue &#39;project name&#39;\n\nProject setup在package.json中添加配置\n&quot;scripts&quot;: &#123;\n    &quot;devDependencies&quot;: &#123;\n        &quot;sass&quot;: &quot;^1.49.8&quot;,          &#x2F;&#x2F; 如使用其他版本可能因为版本过高导致启动服务失败\n        &quot;sass-loader&quot;: &quot;^8.0.2&quot;,    &#x2F;&#x2F; 如使用其他版本可能因为版本过高导致启动服务失败\n    &#125;\n&#125;\n\n$ npm install\n\nuView-ui推荐通过HBuilderX引入插件方式添加\n在package.json中添加配置\n&quot;scripts&quot;: &#123;\n  &quot;serve:wx&quot;: &quot;npm run dev:mp-weixin&quot;,\n  &quot;dev:mp-weixin&quot;: &quot;cross-env NODE_ENV&#x3D;development UNI_PLATFORM&#x3D;mp-weixin vue-cli-service uni-build --watch&quot;,\n&#125;\n\n\n\nProject run$ npm run serve:wx\n\n在微信开发者工具导入项目:路径为dist\\dev\\mp-weixin即可热更新\nVS Code 开发插件uni-app-schemas\n\n\n\n\n\n\n\n\n校验 uni-app 中的 androidPrivacy.json、pages.json 和 manifest.json 格式\nuni-app-snippets\n\n\n\n\n\n\n\n\nuni-app 基本能力代码片段\nuni-create-view\n\n\n\n\n\n\n\n\n快速创建uniapp视图与组件可以创建分包组件\n","slug":"使用VSCode开发uni-app/index","date":"2022-08-02T16:00:00.000Z","categories_index":"环境搭建及配置","tags_index":"环境搭建及配置,uni-app,VS Code","author_index":"Life Experiencer"},{"id":"c6ed01f79789c67a9afc63759dd9592c","title":"wx小程序 bug记录","content":"\n\n\n\n\n\n\n注意！\n遇到所有问题，先在真机跑一下，说不定好了\n\nbackground-size不生效view &#123;\n    background: url(&#39;xxx.png&#39;) no-repeat;\n    background-size: 100% 100%;\n&#125;\n如此写法时，background-size不会生效，要使用background-image属性声明背景图片\nview &#123;\n    background-image: url(&#39;xxx.png&#39;);\n    background-repeat: no-repeat;\n    background-size: 100% 100%;\n&#125;\n\nEcharts不显示使用Echarts绘制canvas时，必须给其父级盒子声明宽高，并且此view中不能拥有其他挤占宽高的元素\n&lt;view class&#x3D;&quot;chart-box&quot;&gt;\n\t&lt;ec-canvas ...&gt;&lt;&#x2F;ec-canvas&gt;\n&lt;&#x2F;view&gt;\n.chart-box &#123;\n    width: 100rpx;\n    height: 100rpx;\n&#125;\n\nEcharts层级问题\n\n\n\n\n\n提示\n首先确认：打开手机扫码确认问题在真机也会同时出现\n\n使用canvas时，层级会自动置于最高，解决办法：给canvas元素增加属性type=&quot;2d&quot;Echarts文档中写明，如不配置force-use-old-canvas=&quot;true&quot;的情况下，只要用户的基础库版本 &gt;&#x3D; 2.9.0，会自动为其中的canvas添加该属性，但效果显示并非如此通过翻看源码查到，如果添加isUseNewCanvas，会使用新版canvas，但结果也并非如此，于是尝试更改源码，将其中的ec-canvas.js文件中的data.isUseNewCanvas改为true得以解决\n\n给组件使用hidden属性时失效组件的hidden显示要使用view套一层，控制外层view的hidden\n引入字体wx.loadFontFace(&#123;\n    family: &#39;zhenyan&#39;,\n    source: &quot;url(&#39;https:&#x2F;&#x2F;xxx&#x2F;zhenyan.ttf&#39;)&quot;,\n    global: true\n&#125;)\n\n\n\n\n\n\n\n\n注意\nscopes: native配置后wxss文件中会失效app.js文件中引用无效\n\n小程序canvas绘制最新版本和web语法一致，但ctx对象需要如下操作\nlet query &#x3D; wx.createSelectorQuery().in(this);\nquery.select(&#39;#canvas&#39;).fields(&#123;\n    node: true,\n    size: true\n&#125;).exec(resp &#x3D;&gt; &#123;\n    const width &#x3D; resp[0].width;\n    const height &#x3D; resp[0].height;\n    let canvas &#x3D; resp[0].node;\n    let ctx &#x3D; canvas.getContext(&#39;2d&#39;);\n    let dpr &#x3D; wx.getSystemInfoSync().pixelRatio;\n    canvas.width &#x3D; width * dpr;\n    canvas.height &#x3D; height * dpr;\n\n    &#x2F;&#x2F; 绘制逻辑\n&#125;);\n\nwx.getUserProfile()接口调用不报错直接进入faildesc属性必填，且不可过长\nvant组件引入后不生效尝试重启编译器，引入未使用过的组件，第一次渲染不会生效\n背景图片时而可以用静态地址，时而不行经测试，怀疑是过大的图片文件不可以用静态地址解决方式：换用image元素做背景\n","slug":"wx小程序-bug记录/index","date":"2022-07-29T16:00:00.000Z","categories_index":"bug","tags_index":"bug,wx小程序","author_index":"Life Experiencer"},{"id":"e731b129ad8438b546830de537cc0a95","title":"Web基础 bug记录","content":"使用iFrame时，内嵌页面出现滚动条且高度不对\n\n\n\n\n\n\n\n\n原因：和img出现在div时一致，因为iFrame是行内元素，基线原因导致\n","slug":"Web基础-bug记录/index","date":"2022-05-16T16:00:00.000Z","categories_index":"bug","tags_index":"bug,web前端基础","author_index":"Life Experiencer"},{"id":"bec3eed037605986e82f30f910c0b6ea","title":"layui bug记录","content":"首次加载弹框时，背景闪白问题\n\n\n\n\n\n\n\n\n原因：源码layui.css中，存在样式：\n.layui-layer-load &#123;\n    background: url(loading-1.gif) center center no-repeat #eee;\n&#125;\n\n\n\n\n\n\n\n\n\n\n修改样式中颜色即可\n.layui-layer-load &#123;\n    background: url(loading-1.gif) center center no-repeat rgba(0, 0, 0, .2);\n&#125;","slug":"layui-bug记录/index","date":"2022-04-13T16:00:00.000Z","categories_index":"bug","tags_index":"bug,layui","author_index":"Life Experiencer"},{"id":"fd888ffbf7087b4ba83a165597c715b7","title":"Element bug记录","content":"Element.ui使用el-tree组件，一键展开或关闭expandAll() &#123;\n    for (let key in this.$refs.tree.store.nodesMap) &#123;\n        this.$refs.tree.store.nodesMap[key].expanded &#x3D; true;\n    &#125;\n&#125;\n\n\n\n\n\n\n\n注意\n  需要在el-tree组件上添加属性node-key=&quot;id&quot;，用以生成NodesMap，才可以进行遍历\n\nel-upload上传标签改变大小* &#123;\n    --uploadWidth: 70px;\n&#125;\n\n.el-upload--picture-card &#123;\n    width: var(--uploadWidth);\n    height: var(--uploadWidth);\n&#125;\n\n.el-upload &#123;\n    width: var(--uploadWidth);\n    height: var(--uploadWidth);\n    line-height: var(--uploadWidth);\n&#125;\n\n.el-upload-list--picture-card .el-upload-list__item &#123;\n    width: var(--uploadWidth);\n    height: var(--uploadWidth);\n    line-height: var(--uploadWidth);\n&#125;\n\n.el-upload-list--picture-card .el-upload-list__item-thumbnail &#123;\n    width: var(--uploadWidth);\n    height: var(--uploadWidth);\n    line-height: var(--uploadWidth);\n&#125;\n\n.avatar &#123;\n    width: var(--uploadWidth);\n    height: var(--uploadWidth);\n&#125;\n\nElement Plus\n\n\n\n\n\n提示\n  暂无\n\n","slug":"Element-bug记录/index","date":"2021-08-16T16:00:00.000Z","categories_index":"bug","tags_index":"bug,element","author_index":"Life Experiencer"},{"id":"2d463effdc98de85ee0a0b453c60fead","title":"Vue bug记录","content":"Vue2进入页面默认查找动态生成的内容，查找结果为空\n\n\n\n\n\n\n\n\n首先，查找元素应该在mounted生命周期中，因为此时页面已经完成渲染，其次，动态生成的元素，如果其数据是异步获取，应该在获取到以后，进行查找，并使用Vue实例的方法$nextTick(); 因为此时数据获取到了，但页面内容并未渲染，在下一帧时才进行渲染\nVue3Vue3声明对象或数组后，不失去响应的赋值方式源代码：\nlet array: number[] &#x3D; reactive([]);\t\t\t&#x2F;&#x2F; proxy...\narray &#x3D; reactive([]);\t\t\t&#x2F;&#x2F; proxy...\narray &#x3D; [];\t\t\t&#x2F;&#x2F; [ ]\n\n\n\n\n\n\n\n提示\n可见，直接赋值[ ]，会让变量失去响应，再次赋值reactive()又不符合规范\n\n解决方式1Object.assign函数的原理是遍历所有可枚举和自有属性从源对象赋值到目标对象\nconst array: number &#x3D; reactive([]);\nObject.assign(array, [1,2,3]);\n\n解决方式2使用状态机管理代理对象\nconst state: IState &#x3D; reactive(&#123;\n    array: []\n&#125;);\nstate.array &#x3D; [];\n\nVue3样式穿透\n\n\n\n\n\n\n注意\n1.&lt;style&gt;标签设置scoped属性2.使用:(deep):3.html元素及css选择器均不能为根节点\n\n&lt;main&gt;\n    &lt;xxx&gt;&lt;&#x2F;xxx&gt;\n&lt;&#x2F;main&gt;\nmain &#123;\n    :deep(.xxx) &#123;\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n    &#125;\n&#125;\n\nVue3设置子组件样式在父级无法穿透组件最外层级嵌套一层div\n&lt;div&gt;\n    &lt;main&gt;\n\n    &lt;&#x2F;main&gt;\n&lt;&#x2F;div&gt;","slug":"Vue-bug记录/index","date":"2021-05-08T16:00:00.000Z","categories_index":"bug","tags_index":"bug,vue","author_index":"Life Experiencer"}]